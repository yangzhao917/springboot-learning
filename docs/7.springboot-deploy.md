# Spring Boot éƒ¨ç½²è¯¦è§£

> æ‘˜è¦ï¼ˆTL;DRï¼‰
> - ç›®æ ‡ï¼šæŒæ¡ Spring Boot åº”ç”¨çš„å¤šç§éƒ¨ç½²æ–¹å¼
> - å­¦ä¼šï¼šJaråŒ…éƒ¨ç½²ã€WaråŒ…éƒ¨ç½²ã€Dockerå®¹å™¨åŒ–éƒ¨ç½²ã€Docker Composeç¼–æ’éƒ¨ç½²
> - æ”¶è·ï¼šçµæ´»é€‰æ‹©é€‚åˆé¡¹ç›®çš„éƒ¨ç½²æ–¹æ¡ˆï¼Œæå‡åº”ç”¨å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§

## ğŸ“š ç›®å½•

- [å†…å®¹æ¦‚è§ˆ](#å†…å®¹æ¦‚è§ˆ)
- [7.1 éƒ¨ç½²åŸºç¡€æ¦‚å¿µ](#71-éƒ¨ç½²åŸºç¡€æ¦‚å¿µ)
- [7.2 JaråŒ…éƒ¨ç½²æ–¹å¼](#72-jaråŒ…éƒ¨ç½²æ–¹å¼)
- [7.3 WaråŒ…éƒ¨ç½²æ–¹å¼](#73-waråŒ…éƒ¨ç½²æ–¹å¼)
- [7.4 Dockerå®¹å™¨åŒ–éƒ¨ç½²](#74-dockerå®¹å™¨åŒ–éƒ¨ç½²)
- [7.5 Docker Composeç¼–æ’éƒ¨ç½²](#75-docker-composeç¼–æ’éƒ¨ç½²)
- [7.6 éƒ¨ç½²æœ€ä½³å®è·µ](#76-éƒ¨ç½²æœ€ä½³å®è·µ)
- [7.7 æ€»ç»“](#77-æ€»ç»“)

---

## å†…å®¹æ¦‚è§ˆ

æœ¬æ–‡æ¡£å…¨é¢ä»‹ç»Spring Bootåº”ç”¨çš„å¤šç§éƒ¨ç½²æ–¹å¼ï¼Œæ¶µç›–ä»¥ä¸‹æ ¸å¿ƒå†…å®¹ï¼š

### ğŸ“š ä¸»è¦å†…å®¹

#### ç¬¬ä¸€éƒ¨åˆ†ï¼šéƒ¨ç½²åŸºç¡€ï¼ˆå…¥é—¨ï¼‰
- **éƒ¨ç½²æ¦‚å¿µ**ï¼šä»€ä¹ˆæ˜¯åº”ç”¨éƒ¨ç½²ï¼Œä¸ºä»€ä¹ˆéœ€è¦å¤šç§éƒ¨ç½²æ–¹å¼
- **éƒ¨ç½²æ–¹å¼å¯¹æ¯”**ï¼šJaråŒ…ã€WaråŒ…ã€Dockerç­‰éƒ¨ç½²æ–¹å¼çš„ä¼˜ç¼ºç‚¹
- **é€‚ç”¨åœºæ™¯**ï¼šä¸åŒéƒ¨ç½²æ–¹å¼çš„é€‚ç”¨åœºæ™¯åˆ†æ

#### ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿéƒ¨ç½²æ–¹å¼ï¼ˆè¿›é˜¶ï¼‰
- **JaråŒ…éƒ¨ç½²**ï¼šå¯æ‰§è¡ŒJaråŒ…çš„æ„å»ºä¸è¿è¡Œ
- **WaråŒ…éƒ¨ç½²**ï¼šéƒ¨ç½²åˆ°å¤–éƒ¨Servletå®¹å™¨ï¼ˆå¦‚Tomcatï¼‰

#### ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼ˆå®æˆ˜ï¼‰
- **Dockeréƒ¨ç½²**ï¼šä½¿ç”¨Dockerå®¹å™¨åŒ–Spring Bootåº”ç”¨
- **Docker Composeéƒ¨ç½²**ï¼šå¤šå®¹å™¨åº”ç”¨ç¼–æ’éƒ¨ç½²

#### ç¬¬å››éƒ¨åˆ†ï¼šæœ€ä½³å®è·µï¼ˆæ·±å…¥ï¼‰
- **é…ç½®ç®¡ç†**ï¼šä¸åŒç¯å¢ƒçš„é…ç½®ç®¡ç†ç­–ç•¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šéƒ¨ç½²è¿‡ç¨‹ä¸­çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- **ç›‘æ§è¿ç»´**ï¼šéƒ¨ç½²åçš„ç›‘æ§ä¸è¿ç»´å»ºè®®

### ğŸ”§ æ ¸å¿ƒå·¥å…·

| å·¥å…· | ä½œç”¨ | è¯´æ˜ |
|------|------|------|
| `Maven` | æ„å»ºå·¥å…· | é¡¹ç›®æ„å»ºå’Œæ‰“åŒ… |
| `Docker` | å®¹å™¨åŒ–å·¥å…· | åº”ç”¨å®¹å™¨åŒ–éƒ¨ç½² |
| `Docker Compose` | å®¹å™¨ç¼–æ’å·¥å…· | å¤šå®¹å™¨åº”ç”¨ç¼–æ’ |
| `JVMå‚æ•°` | è¿è¡Œæ—¶é…ç½® | åº”ç”¨è¿è¡Œæ—¶æ€§èƒ½è°ƒä¼˜ |

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **å¤šç§éƒ¨ç½²æ–¹å¼**ï¼šæ”¯æŒJarã€Warã€Dockerç­‰å¤šç§éƒ¨ç½²æ–¹å¼
- **ç¯å¢ƒéš”ç¦»**ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒé…ç½®
- **å®¹å™¨åŒ–æ”¯æŒ**ï¼šç°ä»£åŒ–çš„å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡

---

## 7.1 éƒ¨ç½²åŸºç¡€æ¦‚å¿µ

### ğŸ¤” ä»€ä¹ˆæ˜¯åº”ç”¨éƒ¨ç½²ï¼Ÿ

**åº”ç”¨éƒ¨ç½²**æ˜¯å°†å¼€å‘å®Œæˆçš„åº”ç”¨ç¨‹åºå®‰è£…åˆ°ç›®æ ‡ç¯å¢ƒä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿå¯¹å¤–æä¾›æœåŠ¡çš„è¿‡ç¨‹ã€‚

### ğŸ’¡ ç”Ÿæ´»ä¸­çš„æ¯”å–»

æƒ³è±¡ä½ è¦å¼€ä¸€å®¶é¤å…ï¼š
- **JaråŒ…éƒ¨ç½²**ï¼šåƒç§»åŠ¨é¤è½¦ï¼Œè‡ªå¸¦è®¾å¤‡ï¼Œåˆ°å“ªéƒ½èƒ½è¥ä¸š
- **WaråŒ…éƒ¨ç½²**ï¼šåƒä¼ ç»Ÿé¤å…ï¼Œéœ€è¦ç§Ÿç”¨å•†åœºçš„åœºåœ°å’ŒåŸºç¡€è®¾æ–½
- **Dockeréƒ¨ç½²**ï¼šåƒæ ‡å‡†åŒ–çš„å¿«é—ªåº—ï¼Œç»Ÿä¸€è£…ä¿®ï¼Œå¯ä»¥å¿«é€Ÿå¤åˆ¶

### ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦å¤šç§éƒ¨ç½²æ–¹å¼ï¼Ÿ

ä¸åŒçš„éƒ¨ç½²æ–¹å¼é€‚ç”¨äºä¸åŒçš„åœºæ™¯å’Œéœ€æ±‚ï¼š

| éƒ¨ç½²æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|---------|
| JaråŒ… | ç®€å•å¿«æ·ã€ç‹¬ç«‹è¿è¡Œ | èµ„æºå ç”¨å¤§ | å¼€å‘æµ‹è¯•ã€å°å‹åº”ç”¨ |
| WaråŒ… | èµ„æºå…±äº«ã€é›†ä¸­ç®¡ç† | ä¾èµ–å®¹å™¨ã€é…ç½®å¤æ‚ | ä¼ä¸šçº§åº”ç”¨ã€å·²æœ‰å®¹å™¨ç¯å¢ƒ |
| Docker | ç¯å¢ƒéš”ç¦»ã€æ˜“äºæ‰©å±• | å­¦ä¹ æˆæœ¬ã€é•œåƒç®¡ç† | å¾®æœåŠ¡ã€äº‘åŸç”Ÿåº”ç”¨ |

---

## 7.2 JaråŒ…éƒ¨ç½²æ–¹å¼

### ğŸ“¦ JaråŒ…éƒ¨ç½²æ¦‚è¿°

JaråŒ…éƒ¨ç½²æ˜¯Spring Booté»˜è®¤çš„éƒ¨ç½²æ–¹å¼ï¼Œå°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„Jaræ–‡ä»¶ï¼Œå†…ç½®äº†WebæœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚

### ğŸ› ï¸ æ„å»ºå¯æ‰§è¡ŒJaråŒ…

#### 1. Mavené…ç½®

åœ¨[pom.xml](file:///Users/yangzhao/Projects/IdeaProjects/springboot-learning/pom.xml)ä¸­ç¡®ä¿æœ‰Spring Boot Mavenæ’ä»¶ï¼š

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build>
```

#### 2. æ‰“åŒ…å‘½ä»¤

```bash
# æ¸…ç†å¹¶æ‰“åŒ…
mvn clean package

# è·³è¿‡æµ‹è¯•æ‰“åŒ…ï¼ˆå¼€å‘é˜¶æ®µï¼‰
mvn clean package -DskipTests
```

æ‰“åŒ…å®Œæˆåï¼ŒJaråŒ…ä½äº`target/`ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º`é¡¹ç›®å-version.jar`ã€‚

#### 3. è¿è¡ŒJaråŒ…

```bash
# åŸºæœ¬è¿è¡Œæ–¹å¼
java -jar target/springboot-learning-1.0-SNAPSHOT.jar

# æŒ‡å®šç«¯å£è¿è¡Œ
java -jar target/springboot-learning-1.0-SNAPSHOT.jar --server.port=8080

# æŒ‡å®šç¯å¢ƒé…ç½®è¿è¡Œ
java -jar target/springboot-learning-1.0-SNAPSHOT.jar --spring.profiles.active=prod

# åå°è¿è¡Œ
nohup java -jar target/springboot-learning-1.0-SNAPSHOT.jar > app.log 2>&1 &
```

### âš™ï¸ JVMå‚æ•°è°ƒä¼˜

```bash
# å†…å­˜è®¾ç½®å’ŒGCä¼˜åŒ–
java -Xms512m -Xmx1024m -XX:+UseG1GC -jar target/springboot-learning-1.0-SNAPSHOT.jar

# è¿œç¨‹è°ƒè¯•
java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 -jar target/springboot-learning-1.0-SNAPSHOT.jar

# JMXç›‘æ§
java -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -jar target/springboot-learning-1.0-SNAPSHOT.jar
```

---

## 7.3 WaråŒ…éƒ¨ç½²æ–¹å¼

### ğŸ“¦ WaråŒ…éƒ¨ç½²æ¦‚è¿°

WaråŒ…éƒ¨ç½²æ˜¯å°†åº”ç”¨æ‰“åŒ…æˆWaræ–‡ä»¶ï¼Œéƒ¨ç½²åˆ°å¤–éƒ¨çš„Servletå®¹å™¨ï¼ˆå¦‚Tomcatã€Jettyï¼‰ä¸­è¿è¡Œã€‚

### ğŸ› ï¸ é…ç½®WaråŒ…éƒ¨ç½²

#### 1. ä¿®æ”¹ä¸»åº”ç”¨ç±»

éœ€è¦ç»§æ‰¿`SpringBootServletInitializer`å¹¶é‡å†™`configure`æ–¹æ³•ï¼š

```java
@SpringBootApplication
public class App extends SpringBootServletInitializer {

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(App.class);
    }

    public static void main(String[] args) {
        SpringApplication.run(App.class, args);
    }
}
```

#### 2. ä¿®æ”¹[pom.xml](file:///Users/yangzhao/Projects/IdeaProjects/springboot-learning/pom.xml)é…ç½®

```
<!-- ä¿®æ”¹æ‰“åŒ…æ–¹å¼ä¸ºwar -->
<packaging>war</packaging>

<dependencies>
    <!-- Webæ¨¡å—çš„èµ·æ­¥ä¾èµ–-->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
        <!-- ç§»é™¤å†…åµŒTomcat -->
        <exclusions>
            <exclusion>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-tomcat</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    
    <!-- æ·»åŠ Servlet APIä¾èµ– -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <scope>provided</scope>
    </dependency>
    
    <!-- å¦‚æœéœ€è¦åœ¨å¤–éƒ¨å®¹å™¨ä¸­ä½¿ç”¨JSP -->
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-jasper</artifactId>
        <scope>provided</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build>
```

#### 3. æ‰“åŒ…å’Œéƒ¨ç½²

```bash
# æ‰“åŒ…waræ–‡ä»¶
mvn clean package

# éƒ¨ç½²åˆ°Tomcat
# 1. å°†target/springboot-learning-1.0-SNAPSHOT.warå¤åˆ¶åˆ°Tomcatçš„webappsç›®å½•
# 2. å¯åŠ¨Tomcat
# 3. è®¿é—®http://localhost:8080/springboot-learning-1.0-SNAPSHOT/
```

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸Šä¸‹æ–‡è·¯å¾„**ï¼šWaråŒ…éƒ¨ç½²çš„åº”ç”¨ä¼šæœ‰ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œéœ€è¦åœ¨é…ç½®ä¸­å¤„ç†
2. **ç«¯å£é…ç½®**ï¼šç«¯å£ç”±å¤–éƒ¨å®¹å™¨å†³å®šï¼Œé…ç½®æ–‡ä»¶ä¸­çš„server.portæ— æ•ˆ
3. **é™æ€èµ„æº**ï¼šé™æ€èµ„æºè·¯å¾„å¯èƒ½éœ€è¦è°ƒæ•´

---

## 7.4 Dockerå®¹å™¨åŒ–éƒ¨ç½²

### ğŸ³ Dockeréƒ¨ç½²æ¦‚è¿°

Dockerå®¹å™¨åŒ–éƒ¨ç½²æ˜¯å°†åº”ç”¨åŠå…¶è¿è¡Œç¯å¢ƒæ‰“åŒ…æˆå®¹å™¨é•œåƒï¼Œå®ç°ç¯å¢ƒéš”ç¦»å’Œå¿«é€Ÿéƒ¨ç½²ã€‚

### ğŸ› ï¸ åˆ›å»ºDockeré•œåƒ

#### 1. ç¼–å†™Dockerfile

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º[Dockerfile](file:///Users/yangzhao/Projects/IdeaProjects/springboot-learning/Dockerfile)ï¼š

```
# ä½¿ç”¨å®˜æ–¹OpenJDKè¿è¡Œç¯å¢ƒä½œä¸ºåŸºç¡€é•œåƒ
FROM openjdk:8-jre-alpine

# è®¾ç½®ç»´æŠ¤è€…ä¿¡æ¯
LABEL maintainer="yz0917@foxmail.com"

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶JaråŒ…åˆ°å®¹å™¨ä¸­
COPY target/springboot-learning-1.0-SNAPSHOT.jar app.jar

# æš´éœ²ç«¯å£
EXPOSE 8080

# è®¾ç½®JVMå‚æ•°
ENV JAVA_OPTS="-Xms512m -Xmx1024m"

# å¯åŠ¨åº”ç”¨
ENTRYPOINT [ "sh", "-c", "java $JAVA_OPTS -jar app.jar" ]
```

#### 2. æ„å»ºDockeré•œåƒ

```bash
# å…ˆæ‰“åŒ…åº”ç”¨
mvn clean package -DskipTests

# æ„å»ºDockeré•œåƒ
docker build -t springboot-learning:1.0 .

# æŸ¥çœ‹é•œåƒ
docker images
```

#### 3. è¿è¡ŒDockerå®¹å™¨

```bash
# åŸºæœ¬è¿è¡Œæ–¹å¼
docker run -d -p 8080:8080 --name springboot-app springboot-learning:1.0

# æŒ‚è½½é…ç½®æ–‡ä»¶
docker run -d -p 8080:8080 -v /host/config:/app/config --name springboot-app springboot-learning:1.0

# è®¾ç½®ç¯å¢ƒå˜é‡
docker run -d -p 8080:8080 -e SPRING_PROFILES_ACTIVE=prod --name springboot-app springboot-learning:1.0
```

### ğŸš€ å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–

ä¸ºäº†å‡å°é•œåƒä½“ç§¯ï¼Œå¯ä»¥ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼š

```
# ç¬¬ä¸€é˜¶æ®µï¼šæ„å»ºé˜¶æ®µ
FROM maven:3.6.3-openjdk-8 AS build

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶pom.xmlå’Œæºä»£ç 
COPY pom.xml .
COPY src ./src

# æ‰“åŒ…åº”ç”¨
RUN mvn clean package -DskipTests

# ç¬¬äºŒé˜¶æ®µï¼šè¿è¡Œé˜¶æ®µ
FROM openjdk:8-jre-alpine

# è®¾ç½®ç»´æŠ¤è€…ä¿¡æ¯
LABEL maintainer="yz0917@foxmail.com"

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶JaråŒ…
COPY --from=build /app/target/springboot-learning-1.0-SNAPSHOT.jar app.jar

# æš´éœ²ç«¯å£
EXPOSE 8080

# è®¾ç½®JVMå‚æ•°
ENV JAVA_OPTS="-Xms512m -Xmx1024m"

# å¯åŠ¨åº”ç”¨
ENTRYPOINT [ "sh", "-c", "java $JAVA_OPTS -jar app.jar" ]
```

---

## 7.5 Docker Composeç¼–æ’éƒ¨ç½²

### ğŸ¯ Docker Composeæ¦‚è¿°

Docker Composeæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œé€šè¿‡YAMLæ–‡ä»¶é…ç½®åº”ç”¨çš„æœåŠ¡ã€‚

### ğŸ› ï¸ ç¼–æ’Spring Bootåº”ç”¨å’Œä¾èµ–æœåŠ¡

#### 1. åˆ›å»º[docker-compose.yml](file:///Users/yangzhao/Projects/IdeaProjects/springboot-learning/docker-compose.yml)

```
version: '3.8'

services:
  # Spring Bootåº”ç”¨æœåŠ¡
  springboot-app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/springboot_learning?useUnicode=true&characterEncoding=utf-8&useSSL=false
      - SPRING_REDIS_HOST=redis
    depends_on:
      - mysql
      - redis
    networks:
      - app-network

  # MySQLæ•°æ®åº“æœåŠ¡
  mysql:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: springboot_learning
    ports:
      - "3306:3306"
    volumes:
      - mysql-data:/var/lib/mysql
      - ./sql:/docker-entrypoint-initdb.d
    networks:
      - app-network

  # RedisæœåŠ¡
  redis:
    image: redis:6.2-alpine
    ports:
      - "6379:6379"
    networks:
      - app-network

# å®šä¹‰æ•°æ®å·
volumes:
  mysql-data:

# å®šä¹‰ç½‘ç»œ
networks:
  app-network:
    driver: bridge
```

#### 2. åˆ›å»ºDockerç¯å¢ƒé…ç½®

åˆ›å»º`src/main/resources/application-docker.yml`ï¼š

```
server:
  port: 8080

spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5

  redis:
    port: 6379
    timeout: 10000
    jedis:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0

logging:
  level:
    root: INFO
    org.springframework: INFO
    org.example: DEBUG
```

#### 3. ä½¿ç”¨Docker Composeéƒ¨ç½²

```
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f springboot-app

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

### ğŸ”„ æœåŠ¡æ‰©å±•

å¯ä»¥é€šè¿‡Docker Composeè½»æ¾æ‰©å±•æœåŠ¡ï¼š

```
version: '3.8'

services:
  springboot-app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    deploy:
      replicas: 3  # å¯åŠ¨3ä¸ªå®ä¾‹
    networks:
      - app-network

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - springboot-app
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
```

---

## 7.6 éƒ¨ç½²æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

#### 1. é…ç½®ç®¡ç†

```yaml
# application.yml (é»˜è®¤é…ç½®)
server:
  port: 8080

# application-dev.yml (å¼€å‘ç¯å¢ƒ)
server:
  port: 80

# application-prod.yml (ç”Ÿäº§ç¯å¢ƒ)
server:
  port: 8080
  compression:
    enabled: true
```

#### 2. å¥åº·æ£€æŸ¥

```java
@RestController
public class HealthController {
    
    @GetMapping("/health")
    public ResponseEntity<String> health() {
        return ResponseEntity.ok("OK");
    }
    
    @GetMapping("/ready")
    public ResponseEntity<String> ready() {
        // æ£€æŸ¥æ•°æ®åº“è¿æ¥ã€Redisè¿æ¥ç­‰
        return ResponseEntity.ok("READY");
    }
}
```

#### 3. æ—¥å¿—é…ç½®

```yaml
# application.yml
logging:
  level:
    org.springframework: INFO
    org.example: DEBUG
  file:
    name: logs/app.log
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
```

### âš¡ æ€§èƒ½ä¼˜åŒ–

#### 1. JVMå‚æ•°ä¼˜åŒ–

```bash
# ç”Ÿäº§ç¯å¢ƒæ¨èJVMå‚æ•°
java -server \
     -Xms1g -Xmx2g \
     -XX:+UseG1GC \
     -XX:MaxGCPauseMillis=200 \
     -XX:+HeapDumpOnOutOfMemoryError \
     -XX:HeapDumpPath=/tmp/heapdump.hprof \
     -jar app.jar
```

#### 2. è¿æ¥æ± ä¼˜åŒ–

```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
```

### ğŸ”’ å®‰å…¨å»ºè®®

#### 1. æ•æ„Ÿä¿¡æ¯å¤„ç†

```yaml
# ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¤–éƒ¨é…ç½®
spring:
  datasource:
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:root}
```

#### 2. Actuatorå®‰å…¨é…ç½®

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when_authorized
```

---

## 7.7 æ€»ç»“

### ğŸ“ æœ¬ç« è¦ç‚¹å›é¡¾

1. **éƒ¨ç½²åŸºç¡€**ï¼šç†è§£ä¸åŒéƒ¨ç½²æ–¹å¼çš„æ¦‚å¿µå’Œé€‚ç”¨åœºæ™¯
2. **JaråŒ…éƒ¨ç½²**ï¼šSpring Booté»˜è®¤éƒ¨ç½²æ–¹å¼ï¼Œç®€å•å¿«æ·
3. **WaråŒ…éƒ¨ç½²**ï¼šéƒ¨ç½²åˆ°å¤–éƒ¨Servletå®¹å™¨ï¼Œé€‚åˆä¼ä¸šç¯å¢ƒ
4. **Dockeréƒ¨ç½²**ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»ï¼Œæ˜“äºæ‰©å±•
5. **Docker Composeéƒ¨ç½²**ï¼šå¤šå®¹å™¨ç¼–æ’ï¼Œé€‚åˆå¤æ‚åº”ç”¨
6. **æœ€ä½³å®è·µ**ï¼šé…ç½®ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨å»ºè®®

### ğŸ¯ éƒ¨ç½²æ–¹å¼é€‰æ‹©æŒ‡å—

| åœºæ™¯ | æ¨èéƒ¨ç½²æ–¹å¼ | ç†ç”± |
|------|------------|------|
| å¼€å‘æµ‹è¯• | JaråŒ…éƒ¨ç½² | ç®€å•å¿«æ·ï¼Œæ˜“äºè°ƒè¯• |
| ä¼ä¸šåº”ç”¨ | WaråŒ…éƒ¨ç½² | é›†ä¸­ç®¡ç†ï¼Œèµ„æºå…±äº« |
| å¾®æœåŠ¡ | Dockeréƒ¨ç½² | ç¯å¢ƒéš”ç¦»ï¼Œæ˜“äºæ‰©å±• |
| å¤æ‚åº”ç”¨ | Docker Compose | å¤šæœåŠ¡ç¼–æ’ï¼Œç»Ÿä¸€ç®¡ç† |

### ğŸ” å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“

| çŸ¥è¯†ç‚¹ | è¯´æ˜ |
|--------|------|
| **Jar vs War** | JaråŒ…å†…ç½®WebæœåŠ¡å™¨ï¼ŒWaråŒ…éœ€è¦å¤–éƒ¨å®¹å™¨ |
| **Dockerä¼˜åŠ¿** | ç¯å¢ƒä¸€è‡´æ€§ã€å¿«é€Ÿéƒ¨ç½²ã€èµ„æºéš”ç¦» |
| **Composeç¼–æ’** | å¤šå®¹å™¨åº”ç”¨ç®¡ç†ï¼ŒæœåŠ¡ä¾èµ–å¤„ç† |
| **é…ç½®ç®¡ç†** | å¤šç¯å¢ƒé…ç½®ï¼Œå¤–éƒ¨åŒ–é…ç½® |
| **æ€§èƒ½ä¼˜åŒ–** | JVMè°ƒä¼˜ã€è¿æ¥æ± é…ç½®ã€å¥åº·æ£€æŸ¥ |

### ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ 

- [1. Spring Boot å…¥é—¨](1.first-springboot.md)ï¼šå¤ä¹ Spring BootåŸºç¡€çŸ¥è¯†
- [2. Spring Boot é…ç½®](2.springboot-configuration.md)ï¼šæ·±å…¥å­¦ä¹ é…ç½®ç®¡ç†
- [3. Spring Boot æ•´åˆ](3.springboot-Integration.md)ï¼šå­¦ä¹ æ›´å¤šç»„ä»¶æ•´åˆ

> **ğŸ‰ æ­å–œï¼** ä½ å·²ç»æŒæ¡äº†Spring Bootåº”ç”¨çš„å¤šç§éƒ¨ç½²æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„éƒ¨ç½²æ–¹æ¡ˆï¼