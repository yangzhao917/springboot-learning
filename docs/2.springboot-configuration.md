# Spring Boot é…ç½®

## ğŸ“š ç›®å½•

- [å†…å®¹æ¦‚è§ˆ](#å†…å®¹æ¦‚è§ˆ)
- [2.1 ä»€ä¹ˆæ˜¯Spring Booté…ç½®](#21-ä»€ä¹ˆæ˜¯spring-booté…ç½®)
- [2.2 é…ç½®æ–‡ä»¶æ ¼å¼ä¸å±æ€§å¼•ç”¨](#22-é…ç½®æ–‡ä»¶æ ¼å¼ä¸å±æ€§å¼•ç”¨)
- [2.3 çº¦å®šä¼˜äºé…ç½®ï¼ˆConvention over Configurationï¼‰](#23-çº¦å®šä¼˜äºé…ç½®convention-over-configuration)
- [2.4 é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº](#24-é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº)
- [2.5 ç¯å¢ƒé…ç½®ï¼ˆProfileï¼‰](#25-ç¯å¢ƒé…ç½®profile)
- [2.6 å¸¸ç”¨é…ç½®é¡¹](#26-å¸¸ç”¨é…ç½®é¡¹)
- [2.7 é…ç½®è¯»å–æ–¹å¼](#27-é…ç½®è¯»å–æ–¹å¼)
- [2.8 å¤æ‚æ•°æ®æ ¼å¼ä¸ç‰¹æ®Šå­—ç¬¦å¤„ç†](#28-å¤æ‚æ•°æ®æ ¼å¼ä¸ç‰¹æ®Šå­—ç¬¦å¤„ç†)
- [2.9 æœ€ä½³å®è·µ](#29-æœ€ä½³å®è·µ)
- [2.10 æ€»ç»“](#210-æ€»ç»“)

---

## å†…å®¹æ¦‚è§ˆ

æœ¬æ–‡æ¡£å…¨é¢ä»‹ç»Spring Booté…ç½®ç³»ç»Ÿï¼Œæ¶µç›–ä»¥ä¸‹æ ¸å¿ƒå†…å®¹ï¼š

### ğŸ“‹ åŸºç¡€æ¦‚å¿µ
- **é…ç½®å®šä¹‰**ï¼šSpring Booté…ç½®æ˜¯å‘Šè¯‰åº”ç”¨ç¨‹åºå¦‚ä½•è¿è¡Œçš„æ–¹å¼
- **çº¦å®šä¼˜äºé…ç½®**ï¼šSpring Bootçš„æ ¸å¿ƒæ€æƒ³ï¼Œæä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œå‡å°‘é…ç½®å·¥ä½œ

### ğŸ“ é…ç½®æ–‡ä»¶æ ¼å¼
- **Propertiesæ ¼å¼**ï¼šç®€å•ç›´è§‚çš„key=valueæ ¼å¼ï¼Œé€‚åˆç®€å•é…ç½®
- **YAMLæ ¼å¼**ï¼šç»“æ„æ¸…æ™°çš„ç¼©è¿›æ ¼å¼ï¼Œé€‚åˆå¤æ‚é…ç½®
- **å±æ€§å¼•ç”¨**ï¼šæ”¯æŒé…ç½®å€¼ä¹‹é—´çš„å¼•ç”¨å’Œå ä½ç¬¦ `${property.name:defaultValue}`

### ğŸ”§ é…ç½®è¯»å–æ–¹å¼
- **@Valueæ³¨è§£**ï¼šè¯»å–å•ä¸ªé…ç½®å€¼ï¼Œç®€å•ç›´æ¥ï¼Œæ€§èƒ½å¥½
- **Environmentæ¥å£**ï¼šåŠ¨æ€è¯»å–é…ç½®ï¼Œæ”¯æŒè¿è¡Œæ—¶æ¡ä»¶åˆ¤æ–­
- **@ConfigurationProperties**ï¼šå¤æ‚é…ç½®ç»“æ„ï¼Œç±»å‹å®‰å…¨ï¼Œæ”¯æŒéªŒè¯

### ğŸ—ï¸ é«˜çº§ç‰¹æ€§
- **å¤æ‚æ•°æ®ç»“æ„**ï¼šæ”¯æŒæ•°ç»„ã€Mapã€åµŒå¥—å¯¹è±¡ç­‰å¤æ‚æ•°æ®æ ¼å¼
- **ç‰¹æ®Šå­—ç¬¦å¤„ç†**ï¼šæ­£ç¡®å¤„ç†å¼•å·ã€è½¬ä¹‰å­—ç¬¦ã€Unicodeã€å¤šè¡Œæ–‡æœ¬ç­‰
- **é…ç½®éªŒè¯**ï¼šä½¿ç”¨Bean Validationç¡®ä¿é…ç½®æ­£ç¡®æ€§
- **ç¯å¢ƒç®¡ç†**ï¼šä½¿ç”¨Profileåˆ†ç¦»ä¸åŒç¯å¢ƒé…ç½®

### ğŸ“š æœ€ä½³å®è·µ
- **é…ç½®ç»„ç»‡**ï¼šç¯å¢ƒåˆ†ç¦»ã€æ•æ„Ÿä¿¡æ¯ä¿æŠ¤ã€é…ç½®åˆ†å±‚ç®¡ç†
- **æ ¼å¼é€‰æ‹©**ï¼šç®€å•é…ç½®ç”¨Propertiesï¼Œå¤æ‚é…ç½®ç”¨YAML
- **å±æ€§å¼•ç”¨**ï¼šåˆç†ä½¿ç”¨å ä½ç¬¦å’Œé»˜è®¤å€¼ï¼Œé¿å…å¾ªç¯å¼•ç”¨

---

## 2.1 ä»€ä¹ˆæ˜¯Spring Booté…ç½®

Spring Booté…ç½®æ˜¯å‘Šè¯‰åº”ç”¨ç¨‹åºå¦‚ä½•è¿è¡Œçš„æ–¹å¼ã€‚å°±åƒç»™æ‰‹æœºè®¾ç½®é“ƒå£°ã€å£çº¸ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Spring Bootåº”ç”¨ï¼š
- åœ¨å“ªä¸ªç«¯å£è¿è¡Œï¼ˆæ¯”å¦‚8080ç«¯å£ï¼‰
- è¿æ¥å“ªä¸ªæ•°æ®åº“
- æ—¥å¿—è®°å½•åˆ°ä»€ä¹ˆçº§åˆ«
- ç­‰ç­‰...

## 2.2 é…ç½®æ–‡ä»¶æ ¼å¼ä¸å±æ€§å¼•ç”¨

Spring Bootæ”¯æŒä¸¤ç§ä¸»è¦çš„é…ç½®æ–‡ä»¶æ ¼å¼ï¼šPropertieså’ŒYAMLï¼Œå¹¶ä¸”éƒ½æ”¯æŒå±æ€§å¼•ç”¨å’Œå ä½ç¬¦åŠŸèƒ½ã€‚

### 2.2.1 Propertiesæ ¼å¼ (.properties)
```properties
# è¿™æ˜¯æ³¨é‡Šï¼Œä»¥#å¼€å¤´
server.port=8080
server.servlet.context-path=/myapp
spring.application.name=my-spring-app

# å­—ç¬¦ä¸²é…ç½®
app.title=æˆ‘çš„Spring Bootåº”ç”¨
app.description=è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹åº”ç”¨

# æ•°å­—é…ç½®
app.timeout=30
app.retry-count=3

# å¸ƒå°”å€¼é…ç½®
app.enabled=true
app.debug=false

# æ•°ç»„/åˆ—è¡¨é…ç½®ï¼ˆä½¿ç”¨é€—å·åˆ†éš”ï¼‰
app.servers=server1,server2,server3
app.ports=8080,8081,8082

# Mapé…ç½®ï¼ˆä½¿ç”¨ç‚¹å·è¡¨ç¤ºå±‚çº§å…³ç³»ï¼‰
app.database.host=localhost
app.database.port=3306
app.database.name=mydb
app.database.username=root
app.database.password=123456

# åµŒå¥—å¯¹è±¡é…ç½®
app.redis.host=localhost
app.redis.port=6379
app.redis.timeout=2000
app.redis.pool.max-active=8
app.redis.pool.max-idle=8
app.redis.pool.min-idle=0

# å¤šå€¼Mapé…ç½®
app.users.admin.name=ç®¡ç†å‘˜
app.users.admin.role=ADMIN
app.users.user.name=æ™®é€šç”¨æˆ·
app.users.user.role=USER

# å±æ€§å¼•ç”¨å’Œå ä½ç¬¦
# 1. å¼•ç”¨å…¶ä»–é…ç½®å€¼
app.welcome.message=æ¬¢è¿ä½¿ç”¨${app.title}ï¼
app.database.url=jdbc:mysql://${app.database.host}:${app.database.port}/${app.database.name}

# 2. ä½¿ç”¨é»˜è®¤å€¼
app.timeout=${app.retry-count:5}
app.debug=${app.enabled:false}

# 3. å¼•ç”¨ç³»ç»Ÿå±æ€§
app.user.home=${user.home}
app.java.version=${java.version}

# 4. å¼•ç”¨ç¯å¢ƒå˜é‡
app.database.password=${DB_PASSWORD:defaultPassword}
app.redis.host=${REDIS_HOST:localhost}

# 5. åµŒå¥—å±æ€§å¼•ç”¨
app.connection.url=${app.database.url}?useSSL=${app.database.ssl:false}
app.logging.level=${app.debug:false:DEBUG:INFO}

# 6. å¤æ‚å±æ€§å¼•ç”¨
app.full.title=${app.title} - ${spring.application.name}
app.api.base-url=http://${server.address:localhost}:${server.port}${server.servlet.context-path}
```

**Propertiesæ ¼å¼ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨ `key=value` çš„æ ¼å¼
- æ³¨é‡Šç”¨ `#` å¼€å¤´
- ç®€å•ç›´è§‚ï¼Œé€‚åˆç®€å•çš„é…ç½®
- æ”¯æŒåµŒå¥—ç»“æ„ï¼Œä½¿ç”¨ç‚¹å·åˆ†éš”å±‚çº§
- æ•°ç»„ä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªå€¼
- æ”¯æŒå±æ€§å¼•ç”¨å’Œå ä½ç¬¦ `${property.name:defaultValue}`

### 2.2.2 YAMLæ ¼å¼ (.yml æˆ– .yaml)
```yaml
# è¿™æ˜¯æ³¨é‡Šï¼Œä»¥#å¼€å¤´
server:
  port: 8083
  servlet:
    context-path: /myapp
spring:
  application:
    name: my-spring-app

# å­—ç¬¦ä¸²é…ç½®
app:
  title: æˆ‘çš„Spring Bootåº”ç”¨
  description: è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹åº”ç”¨

# æ•°å­—é…ç½®
  timeout: 30
  retry-count: 3

# å¸ƒå°”å€¼é…ç½®
  enabled: true
  debug: false

# æ•°ç»„/åˆ—è¡¨é…ç½®
  servers:
    - server1
    - server2
    - server3
  ports: [8080, 8081, 8082]  # è¡Œå†…æ•°ç»„æ ¼å¼

# Mapé…ç½®
  database:
    host: localhost
    port: 3306
    name: mydb
    username: root
    password: 123456

# åµŒå¥—å¯¹è±¡é…ç½®
  redis:
    host: localhost
    port: 6379
    timeout: 2000
    pool:
      max-active: 8
      max-idle: 8
      min-idle: 0

# å¤æ‚æ•°æ®ç»“æ„ç¤ºä¾‹
  users:
    admin:
      name: ç®¡ç†å‘˜
      role: ADMIN
      permissions:
        - READ
        - WRITE
        - DELETE
    user:
      name: æ™®é€šç”¨æˆ·
      role: USER
      permissions:
        - READ

# å¤šå±‚çº§åˆ—è¡¨
  features:
    - name: ç”¨æˆ·ç®¡ç†
      enabled: true
      config:
        max-users: 1000
        auto-approve: false
    - name: æ•°æ®åˆ†æ
      enabled: false
      config:
        batch-size: 100
        schedule: "0 0 2 * * ?"

# ç¯å¢ƒç‰¹å®šé…ç½®ç¤ºä¾‹
  environments:
    dev:
      debug: true
      log-level: DEBUG
    test:
      debug: false
      log-level: INFO
    prod:
      debug: false
      log-level: WARN

# å±æ€§å¼•ç”¨å’Œå ä½ç¬¦
# 1. å¼•ç”¨å…¶ä»–é…ç½®å€¼
  welcome:
    message: "æ¬¢è¿ä½¿ç”¨${app.title}ï¼"
  
  database:
    url: "jdbc:mysql://${app.database.host}:${app.database.port}/${app.database.name}"

# 2. ä½¿ç”¨é»˜è®¤å€¼
  timeout: ${app.retry-count:5}
  debug: ${app.enabled:false}

# 3. å¼•ç”¨ç³»ç»Ÿå±æ€§
  user:
    home: ${user.home}
  java:
    version: ${java.version}

# 4. å¼•ç”¨ç¯å¢ƒå˜é‡
  database:
    password: ${DB_PASSWORD:defaultPassword}
  redis:
    host: ${REDIS_HOST:localhost}

# 5. åµŒå¥—å±æ€§å¼•ç”¨
  connection:
    url: "${app.database.url}?useSSL=${app.database.ssl:false}"
  logging:
    level: "${app.debug:false:DEBUG:INFO}"

# 6. å¤æ‚å±æ€§å¼•ç”¨
  full:
    title: "${app.title} - ${spring.application.name}"
  api:
    base-url: "http://${server.address:localhost}:${server.port}${server.servlet.context-path}"

# 7. å¤šè¡Œå­—ç¬¦ä¸²ä¸­çš„å±æ€§å¼•ç”¨
  description: |
    åº”ç”¨åç§°: ${spring.application.name}
    ç«¯å£: ${server.port}
    ä¸Šä¸‹æ–‡è·¯å¾„: ${server.servlet.context-path}
    æ•°æ®åº“: ${app.database.host}:${app.database.port}

# 8. æ¡ä»¶å±æ€§å¼•ç”¨
  features:
    user-management:
      enabled: ${app.features.user-management.enabled:true}
      max-users: ${app.features.user-management.max-users:1000}
    data-analysis:
      enabled: ${app.features.data-analysis.enabled:false}
      batch-size: ${app.features.data-analysis.batch-size:100}
```

**YAMLæ ¼å¼ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»
- æ›´æ˜“è¯»ï¼Œç»“æ„æ¸…æ™°
- é€‚åˆå¤æ‚çš„é…ç½®
- æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡
- æ•°ç»„å¯ä»¥ç”¨ `-` æˆ– `[]` è¡¨ç¤º
- å¯¹è±¡ç”¨ç¼©è¿›è¡¨ç¤ºåµŒå¥—å…³ç³»
- æ”¯æŒå±æ€§å¼•ç”¨å’Œå ä½ç¬¦ `${property.name:defaultValue}`

### 2.2.3 å±æ€§å¼•ç”¨è¯¦è§£

Spring Bootæ”¯æŒåœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨å ä½ç¬¦æ¥å¼•ç”¨å…¶ä»–é…ç½®å€¼ï¼Œè¯­æ³•ä¸ºï¼š`${property.name:defaultValue}`

**å±æ€§å¼•ç”¨ç±»å‹ï¼š**
1. **å¼•ç”¨å…¶ä»–é…ç½®å€¼**ï¼š`app.welcome.message=æ¬¢è¿ä½¿ç”¨${app.title}ï¼`
2. **ä½¿ç”¨é»˜è®¤å€¼**ï¼š`app.timeout=${app.retry-count:30}`
3. **å¼•ç”¨ç³»ç»Ÿå±æ€§**ï¼š`app.user.home=${user.home}`
4. **å¼•ç”¨ç¯å¢ƒå˜é‡**ï¼š`app.database.password=${DB_PASSWORD:defaultPassword}`
5. **åµŒå¥—å±æ€§å¼•ç”¨**ï¼š`app.connection.url=${app.database.url}?useSSL=${app.database.ssl:false}`
6. **å¤æ‚å±æ€§å¼•ç”¨**ï¼š`app.full.title=${app.title} - ${spring.application.name}`

**å¼•ç”¨é¡ºåºï¼š** å‘½ä»¤è¡Œå‚æ•° â†’ ç¯å¢ƒå˜é‡ â†’ é…ç½®æ–‡ä»¶ â†’ ç³»ç»Ÿå±æ€§ â†’ é»˜è®¤å€¼

**æœ€ä½³å®è·µï¼š**
- æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼
- é¿å…å¾ªç¯å¼•ç”¨
- ä½¿ç”¨ç¯å¢ƒå˜é‡è¦†ç›–æ•æ„Ÿä¿¡æ¯
- ä¿æŒé…ç½®å±‚æ¬¡ç»“æ„æ¸…æ™°

## 2.3 çº¦å®šä¼˜äºé…ç½®ï¼ˆConvention over Configurationï¼‰

è¿™æ˜¯Spring Bootçš„æ ¸å¿ƒæ€æƒ³ï¼š**"çº¦å®šä¼˜äºé…ç½®"**

### 2.3.1 çº¦å®šä¼˜äºé…ç½®æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ

#### å†å²èƒŒæ™¯
åœ¨Spring Bootå‡ºç°ä¹‹å‰ï¼ŒJavaä¼ä¸šçº§åº”ç”¨å¼€å‘é¢ä¸´å¾ˆå¤šé—®é¢˜ï¼š

**ä¼ ç»ŸSpringå¼€å‘çš„é—®é¢˜ï¼š**
- éœ€è¦å†™å¤§é‡çš„XMLé…ç½®æ–‡ä»¶
- é…ç½®å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™
- é¡¹ç›®å¯åŠ¨æ…¢ï¼Œå¼€å‘æ•ˆç‡ä½
- æ–°æ‰‹å­¦ä¹ æˆæœ¬é«˜

**ä¸¾ä¸ªä¾‹å­ï¼Œä¼ ç»ŸSpringéœ€è¦è¿™æ ·é…ç½®ï¼š**
```xml
<!-- ä¼ ç»ŸSpringéœ€è¦å¤§é‡XMLé…ç½® -->
<beans>
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>
        <property name="username" value="root"/>
        <property name="password" value="123456"/>
    </bean>
    
    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource"/>
    </bean>
    
    <!-- è¿˜æœ‰æ›´å¤šé…ç½®... -->
</beans>
```

#### è®¾è®¡ç†å¿µçš„è¯ç”Ÿ
Spring Bootå›¢é˜Ÿä»Ruby on Railsæ¡†æ¶ä¸­å€Ÿé‰´äº†"çº¦å®šä¼˜äºé…ç½®"çš„ç†å¿µï¼š

**æ ¸å¿ƒæ€æƒ³ï¼š**
- ä¸ºå¸¸è§åœºæ™¯æä¾›**åˆç†çš„é»˜è®¤å€¼**
- å‡å°‘å¼€å‘è€…çš„é…ç½®å·¥ä½œ
- è®©åº”ç”¨èƒ½å¤Ÿ"å¼€ç®±å³ç”¨"
- åªæœ‰åœ¨éœ€è¦æ—¶æ‰è¦†ç›–é»˜è®¤è¡Œä¸º

### 2.3.2 è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

#### é—®é¢˜1ï¼šé…ç½®å¤æ‚
**ä¹‹å‰ï¼š** éœ€è¦å†™å¤§é‡XMLé…ç½®
**ç°åœ¨ï¼š** å¤§éƒ¨åˆ†é…ç½®éƒ½æœ‰é»˜è®¤å€¼ï¼Œé›¶é…ç½®å°±èƒ½è¿è¡Œ

#### é—®é¢˜2ï¼šå­¦ä¹ æˆæœ¬é«˜
**ä¹‹å‰ï¼š** æ–°æ‰‹éœ€è¦å­¦ä¹ å¤§é‡é…ç½®çŸ¥è¯†
**ç°åœ¨ï¼š** æŒ‰ç…§çº¦å®šå°±èƒ½å¿«é€Ÿä¸Šæ‰‹

#### é—®é¢˜3ï¼šé¡¹ç›®å¯åŠ¨æ…¢
**ä¹‹å‰ï¼š** éœ€è¦åŠ è½½å¤§é‡é…ç½®æ–‡ä»¶
**ç°åœ¨ï¼š** æŒ‰éœ€åŠ è½½ï¼Œå¯åŠ¨æ›´å¿«

#### é—®é¢˜4ï¼šé…ç½®å®¹æ˜“å‡ºé”™
**ä¹‹å‰ï¼š** æ‰‹åŠ¨é…ç½®å®¹æ˜“å†™é”™
**ç°åœ¨ï¼š** é»˜è®¤é…ç½®ç»è¿‡æµ‹è¯•ï¼Œæ›´å¯é 

### 2.3.3 çº¦å®šçš„é…ç½®å“ªé‡Œå¯ä»¥çœ‹ï¼Ÿ

#### æ–¹æ³•1ï¼šå®˜æ–¹æ–‡æ¡£
Spring Bootå®˜æ–¹æ–‡æ¡£æä¾›äº†å®Œæ•´çš„é…ç½®å‚è€ƒï¼š
- å®˜ç½‘ï¼šhttps://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html
- ä¸­æ–‡ç‰ˆï¼šhttps://springdoc.cn/spring-boot.html

#### æ–¹æ³•2ï¼šIDEè‡ªåŠ¨è¡¥å…¨
åœ¨IntelliJ IDEAæˆ–Eclipseä¸­ï¼Œè¾“å…¥é…ç½®æ—¶ä¼šæœ‰è‡ªåŠ¨è¡¥å…¨æç¤ºï¼š

```properties
# è¾“å…¥ spring. ä¼šæœ‰è‡ªåŠ¨è¡¥å…¨
spring.datasource.url=
spring.datasource.username=
spring.datasource.password=
```

#### æ–¹æ³•3ï¼šæºç æŸ¥çœ‹
Spring Bootçš„é»˜è®¤é…ç½®å®šä¹‰åœ¨æºç ä¸­ï¼š

```java
// åœ¨Spring Bootæºç ä¸­æŸ¥æ‰¾
@ConfigurationProperties(prefix = "server")
public class ServerProperties {
    private Integer port = 8080;  // é»˜è®¤ç«¯å£8080
    private String servletContextPath = "/";  // é»˜è®¤ä¸Šä¸‹æ–‡è·¯å¾„
    // ... æ›´å¤šé»˜è®¤é…ç½®
}
```

#### æ–¹æ³•4ï¼šè¿è¡Œæ—¶æŸ¥çœ‹
å¯åŠ¨åº”ç”¨åï¼Œè®¿é—® `/actuator/configprops` ç«¯ç‚¹ï¼ˆéœ€è¦æ·»åŠ actuatorä¾èµ–ï¼‰ï¼š

```json
{
  "server": {
    "port": 8080,
    "servlet": {
      "contextPath": "/"
    }
  }
}
```

#### æ–¹æ³•5ï¼šå¸¸ç”¨é»˜è®¤é…ç½®é€ŸæŸ¥è¡¨

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `server.port` | 8080 | æœåŠ¡å™¨ç«¯å£ |
| `server.servlet.context-path` | / | åº”ç”¨ä¸Šä¸‹æ–‡è·¯å¾„ |
| `spring.application.name` | ç©º | åº”ç”¨åç§° |
| `logging.level.root` | INFO | æ ¹æ—¥å¿—çº§åˆ« |
| `spring.datasource.driver-class-name` | æ ¹æ®URLè‡ªåŠ¨æ£€æµ‹ | æ•°æ®åº“é©±åŠ¨ |
| `spring.jpa.hibernate.ddl-auto` | create-drop | JPAè¡¨åˆ›å»ºç­–ç•¥ |

### 2.3.4 ä»€ä¹ˆæ˜¯çº¦å®šä¼˜äºé…ç½®ï¼Ÿ

Spring Bootä¼šæä¾›å¾ˆå¤š**é»˜è®¤å€¼**ï¼Œä½ ä¸éœ€è¦å†™é…ç½®ï¼Œå®ƒå°±èƒ½æ­£å¸¸å·¥ä½œã€‚

**ä¸¾ä¸ªä¾‹å­ï¼š**
- é»˜è®¤ç«¯å£ï¼š8080ï¼ˆä½ ä¸éœ€è¦å†™ `server.port=8080`ï¼‰
- é»˜è®¤ä¸Šä¸‹æ–‡è·¯å¾„ï¼š/ï¼ˆä½ ä¸éœ€è¦å†™ `server.servlet.context-path=/`ï¼‰
- é»˜è®¤é™æ€èµ„æºä½ç½®ï¼š`/static`ã€`/public`ã€`/resources`ã€`/META-INF/resources`

### 2.3.5 ä»€ä¹ˆæ—¶å€™éœ€è¦é…ç½®ï¼Ÿ

å½“ä½ æƒ³è¦**æ”¹å˜é»˜è®¤è¡Œä¸º**æ—¶ï¼š

```properties
# æ”¹å˜é»˜è®¤ç«¯å£
server.port=8081

# æ”¹å˜é»˜è®¤ä¸Šä¸‹æ–‡è·¯å¾„
server.servlet.context-path=/api

# æ”¹å˜é»˜è®¤é™æ€èµ„æºä½ç½®
spring.web.resources.static-locations=classpath:/custom-static/
```

### 2.3.6 çº¦å®šä¼˜äºé…ç½®çš„ä¼˜åŠ¿

#### å¼€å‘æ•ˆç‡æå‡
- **å¿«é€Ÿå¯åŠ¨**ï¼šæ–°å»ºé¡¹ç›®å‡ åˆ†é’Ÿå°±èƒ½è¿è¡Œ
- **å‡å°‘é”™è¯¯**ï¼šé»˜è®¤é…ç½®ç»è¿‡å……åˆ†æµ‹è¯•
- **ä¸“æ³¨ä¸šåŠ¡**ï¼šä¸ç”¨èŠ±æ—¶é—´åœ¨é…ç½®ä¸Š

#### å›¢é˜Ÿåä½œå‹å¥½
- **ç»Ÿä¸€æ ‡å‡†**ï¼šå›¢é˜Ÿéƒ½éµå¾ªç›¸åŒçš„çº¦å®š
- **æ˜“äºç»´æŠ¤**ï¼šé…ç½®å°‘ï¼Œç»´æŠ¤æˆæœ¬ä½
- **çŸ¥è¯†ä¼ æ‰¿**ï¼šæ–°äººå®¹æ˜“ä¸Šæ‰‹

#### æœ€ä½³å®è·µä½“ç°
- **ç»éªŒç§¯ç´¯**ï¼šçº¦å®šåŸºäºSpringå›¢é˜Ÿçš„æœ€ä½³å®è·µ
- **æŒç»­ä¼˜åŒ–**ï¼šé»˜è®¤é…ç½®ä¼šéšç€ç‰ˆæœ¬æ›´æ–°è€Œä¼˜åŒ–
- **ç¤¾åŒºè®¤å¯**ï¼šè¢«å¹¿æ³›æ¥å—å’Œä½¿ç”¨çš„æ ‡å‡†

## 2.4 é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº

Spring Bootä¼šæŒ‰ä»¥ä¸‹é¡ºåºåŠ è½½é…ç½®æ–‡ä»¶ï¼Œ**åé¢çš„ä¼šè¦†ç›–å‰é¢çš„**ï¼š

### 2.4.1 åŠ è½½é¡ºåºï¼ˆä»ä½åˆ°é«˜ä¼˜å…ˆçº§ï¼‰

1. **é»˜è®¤é…ç½®** - Spring Bootå†…ç½®çš„é»˜è®¤å€¼
2. **application.properties** - é¡¹ç›®æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶
3. **application.yml** - é¡¹ç›®æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶
4. **application-{profile}.properties** - ç¯å¢ƒç‰¹å®šé…ç½®
5. **application-{profile}.yml** - ç¯å¢ƒç‰¹å®šé…ç½®
6. **å‘½ä»¤è¡Œå‚æ•°** - å¯åŠ¨æ—¶é€šè¿‡ `--` ä¼ é€’çš„å‚æ•°
7. **ç¯å¢ƒå˜é‡** - ç³»ç»Ÿç¯å¢ƒå˜é‡

### 2.4.2 å®é™…ä¾‹å­

å‡è®¾ä½ æœ‰ä»¥ä¸‹é…ç½®ï¼š

**application.properties:**
```properties
server.port=8080
spring.application.name=my-app
```

**application-dev.properties:**
```properties
server.port=8081
logging.level.org.springframework=DEBUG
```

**å¯åŠ¨å‘½ä»¤:**
```bash
java -jar app.jar --server.port=8082
```

**æœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®:**
- `server.port=8082` (å‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆçº§æœ€é«˜)
- `spring.application.name=my-app` (æ¥è‡ªapplication.properties)
- `logging.level.org.springframework=DEBUG` (æ¥è‡ªapplication-dev.properties)

## 2.5 ç¯å¢ƒé…ç½®ï¼ˆProfileï¼‰

### 2.5.1 ä»€ä¹ˆæ˜¯Profileï¼Ÿ

Profileæ˜¯Spring Bootç”¨æ¥åŒºåˆ†ä¸åŒç¯å¢ƒçš„æœºåˆ¶ï¼Œæ¯”å¦‚ï¼š
- `dev` - å¼€å‘ç¯å¢ƒ
- `test` - æµ‹è¯•ç¯å¢ƒ  
- `prod` - ç”Ÿäº§ç¯å¢ƒ

### 2.5.2 å¦‚ä½•ä½¿ç”¨Profileï¼Ÿ

**æ–¹æ³•1ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š**
```properties
# application.properties
spring.profiles.active=dev
```

**æ–¹æ³•2ï¼šå¯åŠ¨æ—¶æŒ‡å®š**
```bash
java -jar app.jar --spring.profiles.active=prod
```

**æ–¹æ³•3ï¼šç¯å¢ƒå˜é‡**
```bash
export SPRING_PROFILES_ACTIVE=prod
java -jar app.jar
```

### 2.5.3 é…ç½®æ–‡ä»¶å‘½åè§„åˆ™

- `application.properties` - é»˜è®¤é…ç½®
- `application-dev.properties` - å¼€å‘ç¯å¢ƒé…ç½®
- `application-test.properties` - æµ‹è¯•ç¯å¢ƒé…ç½®
- `application-prod.properties` - ç”Ÿäº§ç¯å¢ƒé…ç½®

## 2.6 å¸¸ç”¨é…ç½®é¡¹

### 2.6.1 æœåŠ¡å™¨é…ç½®
```properties
# ç«¯å£å·
server.port=8080

# ä¸Šä¸‹æ–‡è·¯å¾„
server.servlet.context-path=/myapp

# æœåŠ¡å™¨åœ°å€
server.address=0.0.0.0
```

### 2.6.2 åº”ç”¨é…ç½®
```properties
# åº”ç”¨åç§°
spring.application.name=my-spring-app

# åº”ç”¨ç‰ˆæœ¬
spring.application.version=1.0.0
```

### 2.6.3 æ•°æ®åº“é…ç½®
```properties
# æ•°æ®åº“è¿æ¥
spring.datasource.url=jdbc:mysql://localhost:3306/mydb
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
```

### 2.6.4 æ—¥å¿—é…ç½®
```properties
# æ—¥å¿—çº§åˆ«
logging.level.org.springframework=INFO
logging.level.com.example=DEBUG

# æ—¥å¿—æ–‡ä»¶
logging.file.name=logs/app.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
```

## 2.7 é…ç½®è¯»å–æ–¹å¼

Spring Bootæä¾›äº†ä¸‰ç§ä¸»è¦çš„é…ç½®è¯»å–æ–¹å¼ï¼Œå„æœ‰å…¶é€‚ç”¨åœºæ™¯ï¼š

### 2.7.1 @Valueæ³¨è§£ - ç®€å•é…ç½®è¯»å–

**é€‚ç”¨åœºæ™¯ï¼š** è¯»å–å•ä¸ªé…ç½®å€¼ï¼Œç®€å•ç›´æ¥

**åŸºæœ¬ç”¨æ³•ï¼š**
```java
@RestController
public class ConfigController {
    
    @Value("${server.port:8080}")
    private String port;
    
    @Value("${spring.application.name:unknown}")
    private String appName;
    
    @GetMapping("/config")
    public String getConfig() {
        return "ç«¯å£: " + port + ", åº”ç”¨å: " + appName;
    }
}
```

**å¤æ‚é…ç½®è¯»å–ï¼š**
```java
@RestController
public class ComplexConfigController {
    
    // è¯»å–æ•°ç»„é…ç½®
    @Value("${app.servers}")
    private String[] servers;
    
    @Value("${app.ports}")
    private List<Integer> ports;
    
    // è¯»å–Mapé…ç½®
    @Value("${app.database.host}")
    private String dbHost;
    
    @Value("${app.database.port}")
    private int dbPort;
    
    // è¯»å–åµŒå¥—é…ç½®
    @Value("${app.redis.pool.max-active}")
    private int redisMaxActive;
    
    @GetMapping("/complex-config")
    public Map<String, Object> getComplexConfig() {
        Map<String, Object> config = new HashMap<>();
        config.put("servers", Arrays.asList(servers));
        config.put("ports", ports);
        config.put("database", Map.of("host", dbHost, "port", dbPort));
        config.put("redisMaxActive", redisMaxActive);
        return config;
    }
}
```

### 2.7.2 Environmentæ¥å£ - åŠ¨æ€é…ç½®è¯»å–

**é€‚ç”¨åœºæ™¯ï¼š** åŠ¨æ€è¯»å–é…ç½®ã€æ¡ä»¶åˆ¤æ–­ã€è¿è¡Œæ—¶æ£€æŸ¥

**åŸºæœ¬ç”¨æ³•ï¼š**
```java
@RestController
public class EnvironmentController {
    
    @Autowired
    private Environment environment;
    
    @GetMapping("/env-config")
    public Map<String, Object> getConfig() {
        Map<String, Object> config = new HashMap<>();
        
        // è¯»å–ç®€å•é…ç½®
        config.put("port", environment.getProperty("server.port", "8080"));
        config.put("appName", environment.getProperty("spring.application.name", "unknown"));
        
        // è¯»å–æ•°ç»„é…ç½®
        String[] servers = environment.getProperty("app.servers", String[].class);
        config.put("servers", servers != null ? Arrays.asList(servers) : Collections.emptyList());
        
        // è¯»å–æ•°å­—é…ç½®
        Integer timeout = environment.getProperty("app.timeout", Integer.class);
        config.put("timeout", timeout);
        
        // è¯»å–å¸ƒå°”é…ç½®
        Boolean enabled = environment.getProperty("app.enabled", Boolean.class);
        config.put("enabled", enabled);
        
        return config;
    }
    
    // æ£€æŸ¥é…ç½®æ˜¯å¦å­˜åœ¨
    @GetMapping("/check-config")
    public Map<String, Object> checkConfig() {
        Map<String, Object> result = new HashMap<>();
        result.put("hasPort", environment.containsProperty("server.port"));
        result.put("hasAppName", environment.containsProperty("spring.application.name"));
        result.put("hasCustomConfig", environment.containsProperty("app.custom"));
        return result;
    }
    
    // è·å–æ‰€æœ‰é…ç½®
    @GetMapping("/all-config")
    public Map<String, Object> getAllConfig() {
        Map<String, Object> result = new HashMap<>();
        
        // è·å–æ‰€æœ‰ç³»ç»Ÿå±æ€§
        Properties systemProps = System.getProperties();
        result.put("systemProperties", systemProps);
        
        // è·å–æ‰€æœ‰ç¯å¢ƒå˜é‡
        Map<String, String> envVars = System.getenv();
        result.put("environmentVariables", envVars);
        
        return result;
    }
}
```

**é«˜çº§ç”¨æ³•ï¼š**
```java
@Service
public class AdvancedEnvironmentService {
    
    @Autowired
    private Environment environment;
    
    /**
     * è·å–é…ç½®å¹¶æŒ‡å®šé»˜è®¤å€¼
     */
    public String getConfigWithDefault(String key, String defaultValue) {
        return environment.getProperty(key, defaultValue);
    }
    
    /**
     * è·å–é…ç½®å¹¶è½¬æ¢ä¸ºæŒ‡å®šç±»å‹
     */
    public <T> T getConfigAsType(String key, Class<T> targetType) {
        return environment.getProperty(key, targetType);
    }
    
    /**
     * è·å–é…ç½®å¹¶è½¬æ¢ä¸ºæŒ‡å®šç±»å‹ï¼Œå¸¦é»˜è®¤å€¼
     */
    public <T> T getConfigAsType(String key, Class<T> targetType, T defaultValue) {
        return environment.getProperty(key, targetType, defaultValue);
    }
    
    /**
     * æ£€æŸ¥é…ç½®æ˜¯å¦å­˜åœ¨
     */
    public boolean hasConfig(String key) {
        return environment.containsProperty(key);
    }
    
    /**
     * è·å–æ‰€æœ‰ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´çš„é…ç½®
     */
    public Map<String, String> getConfigsWithPrefix(String prefix) {
        Map<String, String> configs = new HashMap<>();
        
        // éå†æ‰€æœ‰é…ç½®ï¼Œæ‰¾å‡ºä»¥æŒ‡å®šå‰ç¼€å¼€å¤´çš„
        for (String key : environment.getPropertySources().stream()
                .filter(ps -> ps instanceof EnumerablePropertySource)
                .map(ps -> (EnumerablePropertySource<?>) ps)
                .flatMap(ps -> Arrays.stream(ps.getPropertyNames()))
                .collect(Collectors.toSet())) {
            
            if (key.startsWith(prefix)) {
                configs.put(key, environment.getProperty(key));
            }
        }
        
        return configs;
    }
    
    /**
     * è·å–é…ç½®çš„åŸå§‹å€¼ï¼ˆä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼‰
     */
    public String getRawConfig(String key) {
        return environment.getProperty(key);
    }
}
```

### 2.7.3 @ConfigurationProperties - å¤æ‚é…ç½®è¯»å–

**é€‚ç”¨åœºæ™¯ï¼š** å¤æ‚é…ç½®ç»“æ„ã€ç±»å‹å®‰å…¨ã€é…ç½®éªŒè¯
```java
// åŸºç¡€é…ç½®ç±»
@ConfigurationProperties(prefix = "app")
@Component
public class AppProperties {
    private String title;
    private String description;
    private int timeout;
    private int retryCount;
    private boolean enabled;
    private boolean debug;
    private List<String> servers;
    private List<Integer> ports;
    private DatabaseConfig database;
    private RedisConfig redis;
    private Map<String, UserConfig> users;
    private List<FeatureConfig> features;
    private Map<String, EnvironmentConfig> environments;
    
    // getterå’Œsetteræ–¹æ³•
    public String getTitle() { return title; }
    public void setTitle(String title) { this.title = title; }
    
    public String getDescription() { return description; }
    public void setDescription(String description) { this.description = description; }
    
    public int getTimeout() { return timeout; }
    public void setTimeout(int timeout) { this.timeout = timeout; }
    
    public int getRetryCount() { return retryCount; }
    public void setRetryCount(int retryCount) { this.retryCount = retryCount; }
    
    public boolean isEnabled() { return enabled; }
    public void setEnabled(boolean enabled) { this.enabled = enabled; }
    
    public boolean isDebug() { return debug; }
    public void setDebug(boolean debug) { this.debug = debug; }
    
    public List<String> getServers() { return servers; }
    public void setServers(List<String> servers) { this.servers = servers; }
    
    public List<Integer> getPorts() { return ports; }
    public void setPorts(List<Integer> ports) { this.ports = ports; }
    
    public DatabaseConfig getDatabase() { return database; }
    public void setDatabase(DatabaseConfig database) { this.database = database; }
    
    public RedisConfig getRedis() { return redis; }
    public void setRedis(RedisConfig redis) { this.redis = redis; }
    
    public Map<String, UserConfig> getUsers() { return users; }
    public void setUsers(Map<String, UserConfig> users) { this.users = users; }
    
    public List<FeatureConfig> getFeatures() { return features; }
    public void setFeatures(List<FeatureConfig> features) { this.features = features; }
    
    public Map<String, EnvironmentConfig> getEnvironments() { return environments; }
    public void setEnvironments(Map<String, EnvironmentConfig> environments) { this.environments = environments; }
}

// æ•°æ®åº“é…ç½®ç±»
public class DatabaseConfig {
    private String host;
    private int port;
    private String name;
    private String username;
    private String password;
    
    // getterå’Œsetteræ–¹æ³•
    public String getHost() { return host; }
    public void setHost(String host) { this.host = host; }
    
    public int getPort() { return port; }
    public void setPort(int port) { this.port = port; }
    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }
    
    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }
}

// Redisé…ç½®ç±»
public class RedisConfig {
    private String host;
    private int port;
    private int timeout;
    private PoolConfig pool;
    
    // getterå’Œsetteræ–¹æ³•
    public String getHost() { return host; }
    public void setHost(String host) { this.host = host; }
    
    public int getPort() { return port; }
    public void setPort(int port) { this.port = port; }
    
    public int getTimeout() { return timeout; }
    public void setTimeout(int timeout) { this.timeout = timeout; }
    
    public PoolConfig getPool() { return pool; }
    public void setPool(PoolConfig pool) { this.pool = pool; }
}

// è¿æ¥æ± é…ç½®ç±»
public class PoolConfig {
    private int maxActive;
    private int maxIdle;
    private int minIdle;
    
    // getterå’Œsetteræ–¹æ³•
    public int getMaxActive() { return maxActive; }
    public void setMaxActive(int maxActive) { this.maxActive = maxActive; }
    
    public int getMaxIdle() { return maxIdle; }
    public void setMaxIdle(int maxIdle) { this.maxIdle = maxIdle; }
    
    public int getMinIdle() { return minIdle; }
    public void setMinIdle(int minIdle) { this.minIdle = minIdle; }
}

// ç”¨æˆ·é…ç½®ç±»
public class UserConfig {
    private String name;
    private String role;
    private List<String> permissions;
    
    // getterå’Œsetteræ–¹æ³•
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public String getRole() { return role; }
    public void setRole(String role) { this.role = role; }
    
    public List<String> getPermissions() { return permissions; }
    public void setPermissions(List<String> permissions) { this.permissions = permissions; }
}

// åŠŸèƒ½é…ç½®ç±»
public class FeatureConfig {
    private String name;
    private boolean enabled;
    private Map<String, Object> config;
    
    // getterå’Œsetteræ–¹æ³•
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public boolean isEnabled() { return enabled; }
    public void setEnabled(boolean enabled) { this.enabled = enabled; }
    
    public Map<String, Object> getConfig() { return config; }
    public void setConfig(Map<String, Object> config) { this.config = config; }
}

// ç¯å¢ƒé…ç½®ç±»
public class EnvironmentConfig {
    private boolean debug;
    private String logLevel;
    
    // getterå’Œsetteræ–¹æ³•
    public boolean isDebug() { return debug; }
    public void setDebug(boolean debug) { this.debug = debug; }
    
    public String getLogLevel() { return logLevel; }
    public void setLogLevel(String logLevel) { this.logLevel = logLevel; }
}
```

### 2.7.4 ä¸‰ç§æ–¹å¼å¯¹æ¯”ä¸é€‰æ‹©

| ç‰¹æ€§ | @Value | Environment | @ConfigurationProperties |
|------|--------|-------------|-------------------------|
| **é€‚ç”¨åœºæ™¯** | å•ä¸ªé…ç½®å€¼ | åŠ¨æ€è¯»å–ã€æ¡ä»¶åˆ¤æ–­ | å¤æ‚é…ç½®ã€ç±»å‹å®‰å…¨ |
| **ç±»å‹å®‰å…¨** | æ‰‹åŠ¨è½¬æ¢ | æ‰‹åŠ¨è½¬æ¢ | è‡ªåŠ¨è½¬æ¢ |
| **æ€§èƒ½** | é«˜ï¼ˆç¼–è¯‘æ—¶æ³¨å…¥ï¼‰ | ä¸­ç­‰ï¼ˆè¿è¡Œæ—¶è·å–ï¼‰ | é«˜ï¼ˆå¯åŠ¨æ—¶ç»‘å®šï¼‰ |
| **éªŒè¯æ”¯æŒ** | æ—  | æ—  | æ”¯æŒBean Validation |
| **IDEæ”¯æŒ** | å¥½ | ä¸€èˆ¬ | æœ€å¥½ |
| **é‡æ„å‹å¥½** | ä¸€èˆ¬ | å·® | æœ€å¥½ |

**é€‰æ‹©å»ºè®®ï¼š**
- **@Value**ï¼šç®€å•é…ç½®ï¼Œå¦‚ç«¯å£å·ã€å¼€å…³ç­‰
- **Environment**ï¼šéœ€è¦åŠ¨æ€åˆ¤æ–­æˆ–è¿è¡Œæ—¶æ£€æŸ¥çš„é…ç½®
- **@ConfigurationProperties**ï¼šå¤æ‚é…ç½®ç»“æ„ï¼Œéœ€è¦ç±»å‹å®‰å…¨å’ŒéªŒè¯

### 2.7.5 ä½¿ç”¨é…ç½®çš„æ§åˆ¶å™¨ç¤ºä¾‹
```java
@RestController
@RequestMapping("/api/config")
public class ConfigApiController {
    
    private final AppProperties appProperties;
    
    public ConfigApiController(AppProperties appProperties) {
        this.appProperties = appProperties;
    }
    
    @GetMapping("/basic")
    public Map<String, Object> getBasicConfig() {
        Map<String, Object> config = new HashMap<>();
        config.put("title", appProperties.getTitle());
        config.put("description", appProperties.getDescription());
        config.put("timeout", appProperties.getTimeout());
        config.put("enabled", appProperties.isEnabled());
        return config;
    }
    
    @GetMapping("/database")
    public DatabaseConfig getDatabaseConfig() {
        return appProperties.getDatabase();
    }
    
    @GetMapping("/redis")
    public RedisConfig getRedisConfig() {
        return appProperties.getRedis();
    }
    
    @GetMapping("/users")
    public Map<String, UserConfig> getUsersConfig() {
        return appProperties.getUsers();
    }
    
    @GetMapping("/features")
    public List<FeatureConfig> getFeaturesConfig() {
        return appProperties.getFeatures();
    }
    
    @GetMapping("/environments")
    public Map<String, EnvironmentConfig> getEnvironmentsConfig() {
        return appProperties.getEnvironments();
    }
}
```

## 2.8 å¤æ‚æ•°æ®æ ¼å¼ä¸ç‰¹æ®Šå­—ç¬¦å¤„ç†

### 2.8.1 Propertiesæ ¼å¼å¤æ‚æ•°æ®ç»“æ„

#### æ•°ç»„å’Œåˆ—è¡¨
```properties
# ç®€å•æ•°ç»„ï¼ˆé€—å·åˆ†éš”ï¼‰
app.servers=server1,server2,server3
app.ports=8080,8081,8082

# å­—ç¬¦ä¸²æ•°ç»„
app.names=å¼ ä¸‰,æå››,ç‹äº”

# æ•°å­—æ•°ç»„
app.weights=1.5,2.0,3.5
```

#### Mapç»“æ„
```properties
# ç®€å•Map
app.database.host=localhost
app.database.port=3306
app.database.name=mydb

# åµŒå¥—Map
app.redis.host=localhost
app.redis.port=6379
app.redis.pool.max-active=8
app.redis.pool.max-idle=8
app.redis.pool.min-idle=0

# å¤šå±‚çº§Map
app.users.admin.name=ç®¡ç†å‘˜
app.users.admin.role=ADMIN
app.users.admin.permissions=READ,WRITE,DELETE
app.users.user.name=æ™®é€šç”¨æˆ·
app.users.user.role=USER
app.users.user.permissions=READ
```

#### ç‰¹æ®Šå­—ç¬¦å¤„ç†
```properties
# 1. åŒ…å«ç©ºæ ¼çš„å€¼éœ€è¦ç”¨å¼•å·åŒ…å›´
app.message="Hello, World!"
app.title="æˆ‘çš„ Spring Boot åº”ç”¨"

# 2. åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å€¼éœ€è¦ç”¨å¼•å·åŒ…å›´
app.path="C:\\Program Files\\MyApp"
app.url="https://example.com/api?param=value&other=test"
app.regex="^[a-zA-Z0-9]+$"

# 3. åŒ…å«ç­‰å·ã€å†’å·ç­‰åˆ†éš”ç¬¦çš„å€¼
app.config="key1=value1,key2=value2"
app.time="2024-01-01 12:00:00"
app.json="{\"name\":\"å¼ ä¸‰\",\"age\":25}"

# 4. åŒ…å«Unicodeå­—ç¬¦
app.unicode="ä½ å¥½ä¸–ç•Œï¼\u4e2d\u6587"
app.emoji="Hello \ud83d\ude00 World"

# 5. åŒ…å«æ¢è¡Œç¬¦çš„å€¼
app.multiline="ç¬¬ä¸€è¡Œ\nç¬¬äºŒè¡Œ\nç¬¬ä¸‰è¡Œ"

# 6. å¤šè¡Œå€¼ï¼ˆä½¿ç”¨åæ–œæ ç»­è¡Œï¼‰
app.description=è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„æè¿°ï¼Œ\
                å¯ä»¥è·¨è¶Šå¤šè¡Œï¼Œ\
                ä½¿ç”¨åæ–œæ è¿æ¥

# 7. åŒ…å«å¼•å·çš„å€¼ï¼ˆéœ€è¦è½¬ä¹‰ï¼‰
app.quoted="He said \"Hello World\""
app.single='He said "Hello World"'

# 8. åŒ…å«åæ–œæ çš„å€¼ï¼ˆéœ€è¦è½¬ä¹‰ï¼‰
app.windows-path="C:\\\\Users\\\\MyApp\\\\config"
app.regex-escape="\\\\d+"

# 9. ç©ºå€¼å’Œç‰¹æ®Šå€¼
app.empty-string=""
app.null-value=null
app.boolean-true=true
app.boolean-false=false

# 10. åŒ…å«ç‰¹æ®Šç¬¦å·çš„é…ç½®é”®
app."special-key"=special value
app."key with spaces"=value with spaces
```

### 2.8.2 YAMLæ ¼å¼å¤æ‚æ•°æ®ç»“æ„

#### æ•°ç»„å’Œåˆ—è¡¨
```yaml
# ç®€å•æ•°ç»„
app:
  servers:
    - server1
    - server2
    - server3
  ports: [8080, 8081, 8082]  # è¡Œå†…æ•°ç»„

# å¯¹è±¡æ•°ç»„
  features:
    - name: ç”¨æˆ·ç®¡ç†
      enabled: true
      config:
        max-users: 1000
        auto-approve: false
    - name: æ•°æ®åˆ†æ
      enabled: false
      config:
        batch-size: 100
        schedule: "0 0 2 * * ?"

# æ··åˆç±»å‹æ•°ç»„
  mixed-list:
    - "å­—ç¬¦ä¸²"
    - 123
    - true
    - null
    - name: å¯¹è±¡
      value: æµ‹è¯•
```

#### Mapå’Œå¯¹è±¡ç»“æ„
```yaml
# ç®€å•Map
app:
  database:
    host: localhost
    port: 3306
    name: mydb
    username: root
    password: 123456

# åµŒå¥—å¯¹è±¡
  redis:
    host: localhost
    port: 6379
    timeout: 2000
    pool:
      max-active: 8
      max-idle: 8
      min-idle: 0
      config:
        test-on-borrow: true
        test-while-idle: false

# å¤æ‚åµŒå¥—ç»“æ„
  users:
    admin:
      name: ç®¡ç†å‘˜
      role: ADMIN
      permissions:
        - READ
        - WRITE
        - DELETE
      settings:
        theme: dark
        language: zh-CN
        notifications:
          email: true
          sms: false
    user:
      name: æ™®é€šç”¨æˆ·
      role: USER
      permissions:
        - READ
      settings:
        theme: light
        language: en-US
        notifications:
          email: true
          sms: true
```

#### ç‰¹æ®Šå­—ç¬¦å’Œæ•°æ®ç±»å‹å¤„ç†
```yaml
# 1. å¤šè¡Œå­—ç¬¦ä¸²å¤„ç†
app:
  # ä¿æŒæ¢è¡Œç¬¦çš„å¤šè¡Œå­—ç¬¦ä¸²ï¼ˆ|ï¼‰
  description: |
    è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œæè¿°
    å¯ä»¥åŒ…å«æ¢è¡Œç¬¦
    ä¿æŒåŸå§‹æ ¼å¼
    åŒ…æ‹¬ç¼©è¿›
    
  # æŠ˜å æ¢è¡Œç¬¦çš„å¤šè¡Œå­—ç¬¦ä¸²ï¼ˆ>ï¼‰
  sql-query: >
    SELECT * FROM users
    WHERE status = 'active'
    ORDER BY created_at DESC
    
  # å¸¦ç¼©è¿›æ§åˆ¶çš„å¤šè¡Œå­—ç¬¦ä¸²ï¼ˆ|- æˆ– |+ï¼‰
  code-block: |-
    function hello() {
        console.log("Hello World");
    }
    
  # æŠ˜å å­—ç¬¦ä¸²ï¼ˆ>ï¼‰
  folded-text: >
    è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬ï¼Œ
    ä¼šè¢«æŠ˜å æˆä¸€è¡Œï¼Œ
    ä½†ä¿æŒå¯è¯»æ€§ã€‚

# 2. å¼•å·ä½¿ç”¨è§„åˆ™
  quotes:
    # å•å¼•å·ï¼šä¸è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦
    single-quoted: 'Hello "World" with quotes'
    single-with-escape: 'He said ''Hello World'''
    
    # åŒå¼•å·ï¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦
    double-quoted: "Hello \"World\" with quotes"
    double-with-escape: "He said \"Hello World\""
    
    # æ— å¼•å·ï¼šç®€å•å€¼
    unquoted: Hello World
    unquoted-number: 123
    unquoted-boolean: true

# 3. ç‰¹æ®Šå­—ç¬¦å¤„ç†
  special-chars:
    # åŒ…å«ç©ºæ ¼å’Œç‰¹æ®Šç¬¦å·
    message: "Hello, World!"
    title: "æˆ‘çš„ Spring Boot åº”ç”¨"
    
    # æ–‡ä»¶è·¯å¾„ï¼ˆWindowså’ŒUnixï¼‰
    windows-path: "C:\\Program Files\\MyApp"
    unix-path: "/usr/local/myapp"
    
    # URLå’ŒæŸ¥è¯¢å‚æ•°
    url: "https://example.com/api?param=value&other=test"
    encoded-url: "https://example.com/api?param=value%20with%20spaces"
    
    # æ­£åˆ™è¡¨è¾¾å¼
    regex: "^[a-zA-Z0-9]+$"
    regex-escape: "\\d+"
    
    # JSONå­—ç¬¦ä¸²
    json: '{"name":"å¼ ä¸‰","age":25}'
    json-escaped: "{\"name\":\"å¼ ä¸‰\",\"age\":25}"

# 4. Unicodeå’Œå›½é™…åŒ–å­—ç¬¦
  unicode:
    # ä¸­æ–‡å­—ç¬¦
    chinese: "ä½ å¥½ä¸–ç•Œï¼"
    chinese-unicode: "\u4e2d\u6587"
    
    # Emojiè¡¨æƒ…
    emoji: "Hello ğŸ˜€ World"
    emoji-unicode: "Hello \ud83d\ude00 World"
    
    # å…¶ä»–Unicodeå­—ç¬¦
    special-symbols: "Â©Â®â„¢â‚¬Â£Â¥"

# 5. ç©ºå€¼å’Œç‰¹æ®Šå€¼
  null-values:
    null-value: null
    empty-string: ""
    empty-string-quoted: ""
    zero: 0
    false-value: false

# 6. å¸ƒå°”å€¼å¤„ç†
  booleans:
    true-values:
      - true
      - True
      - TRUE
      - on
      - On
      - ON
      - yes
      - Yes
      - YES
    false-values:
      - false
      - False
      - FALSE
      - off
      - Off
      - OFF
      - no
      - No
      - NO

# 7. æ•°å­—ç±»å‹å¤„ç†
  numbers:
    integer: 123
    negative: -456
    zero: 0
    float: 3.14
    scientific: 1.23e+4
    infinity: .inf
    negative-infinity: -.inf
    not-a-number: .nan

# 8. æ—¥æœŸå’Œæ—¶é—´å¤„ç†
  datetime:
    date: 2024-01-01
    datetime: 2024-01-01T12:00:00
    datetime-with-timezone: 2024-01-01T12:00:00+08:00
    time: 12:00:00

# 9. åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„é”®å
  "special-keys":
    "key with spaces": "value with spaces"
    "key-with-dashes": "value with dashes"
    "key_with_underscores": "value with underscores"
    "key.with.dots": "value with dots"
    "key:with:colons": "value with colons"

# 10. è½¬ä¹‰å­—ç¬¦å¤„ç†
  escape-chars:
    newline: "Line 1\nLine 2"
    tab: "Column1\tColumn2"
    carriage-return: "Line 1\r\nLine 2"
    backslash: "Path\\to\\file"
    quote-escape: "He said \"Hello\""
    single-quote-escape: 'He said ''Hello'''
```

### 2.8.3 æ•°æ®æ ¼å¼è½¬æ¢ä¸ç±»å‹å¤„ç†

**Propertiesåˆ°YAMLè½¬æ¢ï¼š** ç‚¹å·åˆ†éš”çš„å±‚çº§å…³ç³»è½¬æ¢ä¸ºYAMLçš„ç¼©è¿›ç»“æ„

**ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼š** Spring Bootè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢
- æ•°å­—ï¼š`30` â†’ `int`
- å¸ƒå°”ï¼š`true` â†’ `boolean`  
- å°æ•°ï¼š`1.5` â†’ `double`
- æ•°ç»„ï¼š`server1,server2` â†’ `List<String>`

### 2.8.4 ç‰¹æ®Šå­—ç¬¦å¤„ç†ç¤ºä¾‹

**å…³é”®å¤„ç†è¦ç‚¹ï¼š**
- **å¼•å·ä½¿ç”¨**ï¼šåŒ…å«ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦çš„å€¼å¿…é¡»ç”¨å¼•å·åŒ…å›´
- **è½¬ä¹‰å¤„ç†**ï¼šæ­£ç¡®è½¬ä¹‰åæ–œæ ã€å¼•å·ç­‰ç‰¹æ®Šå­—ç¬¦
- **Unicodeæ”¯æŒ**ï¼šä½¿ç”¨UTF-8ç¼–ç ï¼Œæ­£ç¡®å¤„ç†ä¸­æ–‡å’Œç‰¹æ®Šç¬¦å·
- **è·¯å¾„å¤„ç†**ï¼šä½¿ç”¨è·¨å¹³å°è·¯å¾„åˆ†éš”ç¬¦ï¼Œé¿å…ç¡¬ç¼–ç è·¯å¾„
- **URLç¼–ç **ï¼šåŒ…å«ç‰¹æ®Šå­—ç¬¦çš„URLè¿›è¡Œé€‚å½“ç¼–ç 
- **å¤šè¡Œæ–‡æœ¬**ï¼šä½¿ç”¨YAMLçš„å¤šè¡Œå­—ç¬¦ä¸²æ ¼å¼å¤„ç†é•¿æ–‡æœ¬

### 2.8.5 é…ç½®éªŒè¯

**ä½¿ç”¨Bean Validationï¼š**
```java
@ConfigurationProperties(prefix = "app")
@Validated
public class AppProperties {
    @NotBlank
    private String title;
    
    @Min(1) @Max(100)
    private int timeout;
    
    @Email
    private String adminEmail;
    
    @Valid
    private DatabaseConfig database;
}
```

**è‡ªå®šä¹‰éªŒè¯å™¨ï¼š** å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰éªŒè¯æ³¨è§£å’ŒéªŒè¯å™¨æ¥å¤„ç†ç‰¹å®šä¸šåŠ¡è§„åˆ™

## 2.9 æœ€ä½³å®è·µ

### 2.9.1 é…ç½®ç»„ç»‡ä¸ç®¡ç†
- **ç¯å¢ƒåˆ†ç¦»**ï¼šå°†ä¸åŒç¯å¢ƒçš„é…ç½®åˆ†å¼€ï¼ˆdevã€testã€prodï¼‰
- **æ•æ„Ÿä¿¡æ¯ä¿æŠ¤**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¤–éƒ¨é…ç½®ä¸­å¿ƒç®¡ç†æ•æ„Ÿä¿¡æ¯
- **é…ç½®åˆ†å±‚**ï¼šåŸºç¡€é…ç½®ã€ç¯å¢ƒç‰¹å®šé…ç½®ã€æœ¬åœ°é…ç½®åˆ†å±‚ç®¡ç†
- **å‘½åè§„èŒƒ**ï¼šä½¿ç”¨å°å†™å­—æ¯å’Œç‚¹å·åˆ†éš”ï¼Œå¦‚ `spring.datasource.url`
- **ç»Ÿä¸€å‰ç¼€**ï¼šè‡ªå®šä¹‰é…ç½®ä½¿ç”¨ç»Ÿä¸€å‰ç¼€ï¼Œå¦‚ `myapp.` æˆ– `company.`

### 2.9.2 æ ¼å¼é€‰æ‹©ä¸ç»“æ„è®¾è®¡
- **æ ¼å¼é€‰æ‹©**ï¼šç®€å•é…ç½®ç”¨Propertiesï¼Œå¤æ‚é…ç½®ç”¨YAML
- **ç»“æ„æ¸…æ™°**ï¼šä¿æŒé…ç½®ç»“æ„æ¸…æ™°ï¼Œé¿å…è¿‡æ·±åµŒå¥—
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨@ConfigurationPropertieså¤„ç†å¤æ‚é…ç½®
- **éªŒè¯çº¦æŸ**ï¼šä¸ºé…ç½®æ·»åŠ éªŒè¯æ³¨è§£ï¼Œç¡®ä¿é…ç½®æ­£ç¡®æ€§

### 2.9.3 ç‰¹æ®Šå­—ç¬¦ä¸å±æ€§å¼•ç”¨
- **å¼•å·ä½¿ç”¨**ï¼šåŒ…å«ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦çš„å€¼å¿…é¡»ç”¨å¼•å·åŒ…å›´
- **è½¬ä¹‰å¤„ç†**ï¼šæ­£ç¡®è½¬ä¹‰åæ–œæ ã€å¼•å·ç­‰ç‰¹æ®Šå­—ç¬¦
- **Unicodeæ”¯æŒ**ï¼šä½¿ç”¨UTF-8ç¼–ç ï¼Œæ­£ç¡®å¤„ç†ä¸­æ–‡å’Œç‰¹æ®Šç¬¦å·
- **å±æ€§å¼•ç”¨**ï¼šåˆç†ä½¿ç”¨å ä½ç¬¦å’Œé»˜è®¤å€¼ï¼Œé¿å…å¾ªç¯å¼•ç”¨
- **ç¯å¢ƒå˜é‡**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡è¦†ç›–æ•æ„Ÿä¿¡æ¯

### 2.9.4 æ–‡æ¡£åŒ–ä¸ç»´æŠ¤
- **æ³¨é‡Šè¯´æ˜**ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ³¨é‡Šè¯´æ˜æ¯ä¸ªé…ç½®é¡¹çš„ç”¨é€”
- **å›¢é˜Ÿæ–‡æ¡£**ï¼šä¸ºå›¢é˜Ÿç»´æŠ¤é…ç½®æ–‡æ¡£ï¼Œè¯´æ˜é…ç½®é¡¹çš„å«ä¹‰å’Œé»˜è®¤å€¼
- **å®šæœŸå®¡æŸ¥**ï¼šå®šæœŸå®¡æŸ¥å’Œæ¸…ç†æ— ç”¨çš„é…ç½®é¡¹
- **å˜æ›´è®°å½•**ï¼šè®°å½•é…ç½®å˜æ›´å†å²ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥

## 2.10 æ€»ç»“

Spring Bootçš„é…ç½®ç³»ç»Ÿè®©åº”ç”¨é…ç½®å˜å¾—ç®€å•è€Œå¼ºå¤§ï¼š

### æ ¸å¿ƒç‰¹æ€§
1. **çº¦å®šä¼˜äºé…ç½®** - å‡å°‘é…ç½®å·¥ä½œï¼Œæä¾›åˆç†çš„é»˜è®¤å€¼
2. **å¤šç§æ ¼å¼æ”¯æŒ** - Propertieså’ŒYAMLï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚
3. **å¤æ‚æ•°æ®ç»“æ„** - æ”¯æŒæ•°ç»„ã€Mapã€åµŒå¥—å¯¹è±¡ç­‰å¤æ‚æ•°æ®æ ¼å¼
4. **å±æ€§å¼•ç”¨** - æ”¯æŒé…ç½®å€¼ä¹‹é—´çš„å¼•ç”¨å’Œå ä½ç¬¦
5. **å¤šç§è¯»å–æ–¹å¼** - @Valueã€Environmentã€@ConfigurationPropertiesä¸‰ç§æ–¹å¼
6. **ç±»å‹å®‰å…¨** - é€šè¿‡æ³¨è§£éªŒè¯é…ç½®ï¼Œç¡®ä¿é…ç½®æ­£ç¡®æ€§

### é€‰æ‹©æŒ‡å—

| åœºæ™¯ | æ¨èæ–¹å¼ | åŸå›  |
|------|----------|------|
| å•ä¸ªç®€å•é…ç½® | @Value | ç®€å•ç›´æ¥ï¼Œæ€§èƒ½å¥½ |
| åŠ¨æ€è¯»å–é…ç½® | Environment | æ”¯æŒè¿è¡Œæ—¶æ¡ä»¶åˆ¤æ–­ |
| å¤æ‚é…ç½®ç»“æ„ | @ConfigurationProperties | ç±»å‹å®‰å…¨ï¼Œæ”¯æŒéªŒè¯ |

### å…³é”®è¦ç‚¹
- **æ ¼å¼é€‰æ‹©**ï¼šç®€å•é…ç½®ç”¨Propertiesï¼Œå¤æ‚é…ç½®ç”¨YAML
- **å±æ€§å¼•ç”¨**ï¼šåˆç†ä½¿ç”¨å ä½ç¬¦å’Œé»˜è®¤å€¼ï¼Œé¿å…å¾ªç¯å¼•ç”¨
- **ç‰¹æ®Šå­—ç¬¦**ï¼šæ­£ç¡®å¤„ç†å¼•å·ã€è½¬ä¹‰å­—ç¬¦ã€Unicodeç­‰
- **ç¯å¢ƒç®¡ç†**ï¼šä½¿ç”¨Profileåˆ†ç¦»ä¸åŒç¯å¢ƒé…ç½®
- **éªŒè¯çº¦æŸ**ï¼šæ·»åŠ éªŒè¯æ³¨è§£ç¡®ä¿é…ç½®æ­£ç¡®æ€§

**è®°ä½ï¼šèƒ½ç”¨é»˜è®¤é…ç½®å°±ç”¨é»˜è®¤é…ç½®ï¼Œéœ€è¦æ”¹å˜æ—¶æ‰å†™é…ç½®ï¼é€‰æ‹©åˆé€‚çš„æ–¹å¼è¯»å–é…ç½®ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ï¼**